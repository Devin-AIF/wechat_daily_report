<html lang="zh-CN" style=""><head>
    <style id="__________cytoscape_stylesheet">.__________cytoscape_container { position: relative; }</style><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NotebookLM使用交流群周报 - 2025年5月19日-25日</title>
    <link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-100-M/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" xintegrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoVBL5rLesXWW/sGuLhYFChxgYnz2Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        :root {
            /* 极简主义风格配色 (from report) */
            --bg-primary: #f5f4ee; /* 略暖的米白色 */
            --bg-secondary: #faf9f6; /* 更浅的卡片背景色 */
            --bg-tertiary: #f1f3f5; /* 第三背景色，用于标签等 */
            --text-primary: #212529; /* 主要文字颜色 */
            --text-secondary: #495057; /* 次要文字颜色 */
            --accent-primary: #ff8906; /* 主要强调色 - 橙色 */
            --accent-secondary: #f76707; /* 次要强调色 - 深橙色 */
            --accent-tertiary: #e8590c; /* 第三强调色 - 焦橙色 */
            --accent-blue: #339af0;     /* 特定元素的蓝色强调 */
            --accent-purple: #7048e8; /* 词云的紫色强调 */
            --accent-cyan: #22b8cf;     /* 词云的青色强调 */
            --highlight-keyword-bg: #ffe8cc; /* 关键词高亮背景 */
            --highlight-name-color: #7048e8; /* 人名高亮颜色 */
            --card-padding: 24px; /* 卡片内边距 */
            --grid-gap: 16px; /* 网格间距 */
            --card-radius: 12px; /* 卡片圆角 */
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); /* 卡片阴影 */
            --font-family: 'Inter', 'SF Pro Display', 'Segoe UI', sans-serif; /* 定义字体变量 */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family); /* 使用字体变量 */
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
            width: 100%;
            max-width: 1000px; /* 内容最大宽度 */
            margin: 0 auto; /* 内容居中 */
            padding: 20px; /* 内容周围内边距 */
        }
        body.modal-active {
            overflow: hidden; /* Prevent body scroll when modal is open */
        }

        h1, h2, h3, h4 {
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        h1 {
            font-size: 2.5rem; /* 主卡片大标题 */
            margin-bottom: 0.5rem;
            color: var(--accent-primary);
        }

        h2 { /* H2通用样式, 也用于主题卡片 */
            font-size: 1.75rem; /* 版块标题 */
            margin-bottom: 1rem;
            color: var(--accent-primary); /* 区块和主题卡片标题颜色 */
        }

        h3 { /* 用于子标题或特定元素，如统计卡片 */
            font-size: 1.25rem; /* 子版块标题 */
            margin-bottom: 0.75rem;
            margin-top: 1rem; /* Added margin top for separation */
            color: var(--accent-blue); /* 子标题使用蓝色以形成对比 */
        }
        h4 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }


        .grid-container {
            display: grid;
            grid-template-columns: repeat(12, 1fr); /* 12列网格系统 */
            grid-auto-rows: minmax(100px, auto); /* 行高根据内容自动调整, 至少100px */
            gap: var(--grid-gap);
            margin-top: 20px;
            grid-template-areas: /* 更新的网格区域 */
                "main main main main main main main main main main main main"
                "topics topics topics topics topics topics topics topics topics topics topics topics"
                "mindmap mindmap mindmap mindmap mindmap mindmap mindmap mindmap mindmap mindmap mindmap mindmap"
                "utility utility utility utility utility utility solutions solutions solutions solutions solutions solutions"
                "trends trends trends trends trends trends trends trends trends trends trends trends"
                "quote quote quote quote quote quote links links links links links links"
                "stats stats stats stats stats stats wordcloud wordcloud wordcloud wordcloud wordcloud wordcloud";
        }

        .card {
            background-color: var(--bg-secondary);
            border-radius: var(--card-radius);
            padding: var(--card-padding);
            box-shadow: var(--card-shadow);
            position: relative; /* 用于图标定位和伪元素 */
            overflow: hidden; /* 确保伪元素不超出卡片圆角 */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex; /* 为卡片内flex布局添加 */
            flex-direction: column; /* 垂直堆叠项目 */
        }

        .card:hover {
            transform: translateY(-5px); /* 鼠标悬停时轻微上浮效果 */
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1); /* 鼠标悬停时增强阴影 */
        }

        /* 卡片顶部强调边框 */
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent-primary);
        }

        /* 卡片右下角装饰性图标 */
        .card-icon {
            position: absolute;
            bottom: var(--card-padding);
            right: var(--card-padding);
            font-size: 4rem;
            opacity: 0.07;
            color: var(--accent-primary);
            z-index: 0; /* Ensure it's behind content if necessary */
        }

        /* 网格区域分配 */
        .main-card { grid-area: main; }
        .topic-cards-wrapper {
            grid-area: topics;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: var(--grid-gap);
        }
        .mindmap-card-container { grid-area: mindmap; }
        .utility-card { grid-area: utility; }
        .solutions-card { grid-area: solutions; }
        .trends-card { grid-area: trends; }
        .quote-card { grid-area: quote; }
        .links-card { grid-area: links; }
        .stats-card { grid-area: stats; }
        .wordcloud-card { grid-area: wordcloud; }

        .topic-card {
            grid-column: span 6; /* 默认占据6列 */
            min-height: 200px; /* Adjusted min-height */
        }
        .topic-card > .topic-card-content-wrapper {
            flex-grow: 1; 
            padding-bottom: 1rem; 
        }
        .topic-cards-wrapper > .topic-card:nth-last-child(1):nth-child(odd) {
            grid-column: span 12; /* Last odd card spans full width */
        }

        .main-card h1 { text-align: center; }
        .main-card .date { text-align: center; }
        .date { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 1rem; }
        .meta-info { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 1rem; justify-content: center; }
        .meta-info span { background-color: var(--bg-tertiary); padding: 5px 10px; border-radius: 20px; font-size: 0.9rem; color: var(--accent-blue); }
        .summary { margin-top: 1rem; line-height: 1.7; text-align: left; }
        .topic-category { display: inline-block; background-color: var(--accent-tertiary); color: var(--bg-primary); padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; margin-bottom: 0.5rem; }
        .topic-keywords { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 0.75rem; margin-bottom: 0.75rem; }
        .keyword { background-color: var(--bg-tertiary); color: var(--accent-primary); padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; }
        .highlight-keyword { background-color: var(--highlight-keyword-bg); padding: 1px 2px; border-radius: 2px; font-weight: 500; display: inline; line-height: 1.2; box-decoration-break: clone; -webkit-box-decoration-break: clone; }
        .highlight-name { color: var(--highlight-name-color); font-weight: 500; }
        /* .topic-mentions { font-size: 0.9rem; color: var(--text-secondary); } REMOVED */
        .quote { position: relative; padding-left: 20px; margin: 10px 0; font-style: italic; color: var(--text-secondary); }
        .quote::before { content: '"'; position: absolute; left: 0; top: 0; font-size: 1.5rem; color: var(--accent-tertiary); }
        .quote-author { text-align: right; font-size: 0.9rem; color: var(--accent-tertiary); margin-top: 5px; }
        .link-item { display: flex; align-items: center; margin-bottom: 10px; padding: 8px; border-radius: 6px; background-color: var(--bg-tertiary); transition: background-color 0.2s ease; text-decoration: none; }
        .link-item:hover { background-color: rgba(51, 154, 240, 0.1); }
        .link-item a { text-decoration: none; color: inherit; display: flex; align-items: center; width: 100%; }
        .link-item a:hover .link-title { text-decoration: underline; color: var(--accent-blue); }
        .link-icon { margin-right: 10px; color: var(--accent-blue); }
        .link-title { flex-grow: 1; color: var(--text-primary); }
        .link-title.is-link { color: var(--accent-blue); }
        .link-title.is-link:hover { text-decoration: underline; }
        .user-stats-table { width: 100%; border-collapse: collapse; margin-top: 0.5rem; }
        .user-stats-table th { text-align: center; padding: 0.75rem 0.5rem; border-bottom: 2px solid var(--accent-primary); color: var(--text-primary); font-weight: 600; font-size: 0.9rem; }
        .user-stats-table td { padding: 0.75rem 0.5rem; border-bottom: 1px solid var(--bg-tertiary); color: var(--text-secondary); font-size: 0.85rem; vertical-align: top; text-align: left; }
        .user-stats-table .user-name-col { width: 25%; font-weight: 500; word-break: break-all; }
        .user-stats-table .message-count-col { text-align: center; width: 15%; white-space: nowrap; }
        .user-stats-table .contribution-col { width: 60%; word-break: break-all; }
        .user-stats-table tr:last-child td { border-bottom: none; }
        .wordcloud { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 20px 0; }
        .wordcloud-item { padding: 5px 10px; border-radius: 4px; font-weight: 500; transition: transform 0.2s ease; }
        .wordcloud-item:hover { transform: scale(1.1); }
        .size-1 { font-size: 0.9rem; color: var(--text-secondary); }
        .size-2 { font-size: 1.1rem; color: var(--accent-cyan); }
        .size-3 { font-size: 1.3rem; color: var(--accent-blue); }
        .size-4 { font-size: 1.5rem; color: var(--accent-purple); }
        .size-5 { font-size: 1.8rem; color: var(--accent-tertiary); }
        
        /* Styles for new cards */
        .utility-card ul, .solutions-card div > ul, .trends-card ul {
            list-style-type: none; /* Remove default bullets */
            padding-left: 0;
            margin-top: 0.5rem;
        }
        .utility-card li, .solutions-card div > ul > li, .trends-card li {
            padding: 5px 0;
            border-bottom: 1px dashed var(--bg-tertiary);
        }
        .utility-card li:last-child, .solutions-card div > ul > li:last-child, .trends-card li:last-child {
            border-bottom: none;
        }
        .solutions-card div { /* Wrapper for each problem-solution pair */
            margin-bottom: 1rem;
        }
        .solutions-card p {
            margin-bottom: 0.3rem;
        }


        .action-buttons-container { text-align: center; margin: 20px 0; padding-bottom: 20px; }
        .action-button { background-color: var(--accent-primary); color: white; border: none; padding: 10px 20px; border-radius: var(--card-radius); font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; margin: 5px 10px; box-shadow: var(--card-shadow); display: inline-flex; align-items: center; justify-content: center; }
        .action-button:hover { background-color: var(--accent-secondary); transform: translateY(-2px); }
        .action-button i, .action-button .fas { margin-right: 8px; }
        .footer { margin-top: 30px; text-align: center; color: var(--text-secondary); font-size: 0.9rem; }
        #report-content-wrapper .footer { margin-top: 30px; padding-bottom: 20px; }

        /* Mermaid Diagram Specific Styles */
        .mindmap-card { /* This class is applied to the card holding the mindmap */
            min-height: 400px; /* Adjust as needed */
        }
        .mindmap-card h2 i { margin-right: 8px; }
        .mindmap-controls { display: flex; gap: 10px; margin-bottom: 15px; align-items: center; flex-wrap: wrap; }
        .mindmap-controls button { background-color: var(--accent-blue); color: white; border: none; padding: 8px 12px; border-radius: var(--card-radius); font-size: 0.9rem; cursor: pointer; transition: background-color 0.2s ease; font-weight: 500; display: inline-flex; align-items: center; justify-content: center; }
        .mindmap-controls button:hover { background-color: #228be6; /* Darker blue for hover */ }
        .mindmap-controls button i { margin-right: 5px; }
        .mindmap-controls .fullscreen-toggle-btn { margin-left: auto; }
        .mermaid-container { flex-grow: 1; display: flex; justify-content: center; align-items: center; overflow: auto; background-color: #fff; border-radius: 8px; padding: 10px; border: 1px solid var(--bg-tertiary); min-height: 300px; cursor: grab; }
        .mermaid-container.dragging { cursor: grabbing; }
        .mermaid-container:empty::before { content: "在此处生成或粘贴Mermaid导图代码。"; color: var(--text-secondary); font-style: italic; text-align: center; padding: 20px; }
        .mermaid-container svg { max-width: none; height: auto; display: block; transition: transform 0.2s ease-out; }

        /* Feedback messages for Mermaid */
        #mermaid-main-feedback-message, #mermaid-modal-feedback-message { text-align: center; margin-top: 15px; padding: 8px; border-radius: 4px; font-weight: 500; font-size: 0.9rem; display: none; }
        #mermaid-main-feedback-message.success, #mermaid-modal-feedback-message.success { color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; display: block; }
        #mermaid-main-feedback-message.error, #mermaid-modal-feedback-message.error { color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; display: block; }
        #mermaid-main-feedback-message.info, #mermaid-modal-feedback-message.info { color: #0c5460; background-color: #d1ecf1; border: 1px solid #bee5eb; display: block; }
        
        /* Report's own feedback message styling */
        #feedback-message { text-align: center; margin-top: 10px; font-weight: 500; }
        #feedback-message.success { color: green; }
        #feedback-message.error { color: red; }

        /* Fullscreen Modal Styles for Mermaid */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.75); display: none; justify-content: center; align-items: center; z-index: 1000; padding: 20px; }
        .modal-overlay.active { display: flex; }
        .modal-content { /* This class is also used by the Mermaid modal's inner card */
            width: 95%; height: 90%; max-width: 1200px; 
        }
        .modal-close-btn { position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 2.2rem; color: var(--text-secondary); cursor: pointer; line-height: 1; padding: 5px; z-index: 1010; }
        .modal-close-btn:hover { color: var(--text-primary); }
        #modalMermaidContainer { flex-grow: 1; min-height: 0; /* Ensure it uses space within modal-content */ }
        #modalMermaidContainer:empty::before { content: "导图内容将在此显示。"; color: var(--text-secondary); font-style: italic; text-align: center; padding: 20px; display: flex; justify-content: center; align-items: center; height: 100%; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .card { animation: fadeIn 0.5s ease forwards; }
        .main-card { animation-delay: 0.1s; }
        .topic-cards-wrapper .topic-card:nth-child(1) { animation-delay: 0.2s; }
        .topic-cards-wrapper .topic-card:nth-child(2) { animation-delay: 0.3s; }
        .topic-cards-wrapper .topic-card:nth-child(3) { animation-delay: 0.4s; }
        .topic-cards-wrapper .topic-card:nth-child(4) { animation-delay: 0.5s; }
        .topic-cards-wrapper .topic-card:nth-child(5) { animation-delay: 0.55s; }
        .topic-cards-wrapper .topic-card:nth-child(6) { animation-delay: 0.6s; }
        .topic-cards-wrapper .topic-card:nth-child(7) { animation-delay: 0.65s; }
        .mindmap-card-container .card { animation-delay: 0.7s; }
        .utility-card { animation-delay: 0.75s; }
        .solutions-card { animation-delay: 0.75s; } /* Adjusted delay for same row */
        .trends-card { animation-delay: 0.85s; }
        .quote-card { animation-delay: 0.9s; }
        .links-card { animation-delay: 0.9s; } /* Adjusted delay for same row */
        .stats-card { animation-delay: 1.0s; }
        .wordcloud-card { animation-delay: 1.0s; } /* Adjusted delay for same row */
        #report-content-wrapper .footer { animation: fadeIn 0.5s ease forwards; animation-delay: 1.1s; }
        .action-buttons-container { animation: fadeIn 0.5s ease forwards; animation-delay: 1.2s; }


        @media (max-width: 768px) {
            body { padding: 10px; font-size: 14px; }
            h1 { font-size: 1.8rem; }
            h2 { font-size: 1.4rem; }
            h3 { font-size: 1.1rem; }
            .grid-container {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "main"
                    "topics"
                    "mindmap"
                    "utility"  /* Utility and Solutions will stack on mobile */
                    "solutions"
                    "trends"
                    "quote"    /* Quote and Links will stack on mobile */
                    "links"
                    "stats"    /* Stats and Wordcloud will stack on mobile */
                    "wordcloud";
            }
            .topic-cards-wrapper { grid-template-columns: 1fr; }
            .topic-card { grid-column: 1 / -1; min-height: auto; }
            .topic-card > .topic-card-content-wrapper { padding-bottom: 1rem; }
            .card-icon { font-size: 2.5rem; opacity:0.05; }
            .mindmap-card .card-icon { bottom: 15px; right: 15px; }

            .user-stats-table th, .user-stats-table td { padding: 0.5rem 0.25rem; font-size: 0.8rem; }
            .user-stats-table td { text-align: left; }
            .user-stats-table .message-count-col { text-align: center; }
            .action-button { padding: 8px 15px; font-size: 0.9rem; }
            .action-buttons-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
            .action-buttons-container .action-button { width: calc(50% - 10px); min-width: 180px; margin: 5px 0; }
            
            /* Mermaid specific responsive */
            .mindmap-card .card { padding: 15px; }
            .mindmap-controls button { font-size: 0.8rem; padding: 6px 10px; }
            .modal-content { width: 100%; height: 95%; }
            .modal-close-btn { font-size: 1.8rem; top:10px; right:10px;}
        }
        @media (max-width: 480px) {
            .action-buttons-container .action-button { width: 80%; }
            .user-stats-table { display: block; overflow-x: auto; }
            .user-stats-table th, .user-stats-table td { white-space: normal; }
            .user-stats-table thead, .user-stats-table tbody, .user-stats-table tr { display: block; }
            .user-stats-table tr { border-bottom: 1px solid var(--bg-tertiary); }
            .user-stats-table th { display: none; }
            .user-stats-table td { display: block; text-align: left; border-bottom: none; padding-left: 0.5rem; }
            .user-stats-table td.message-count-col { text-align: left; }
            .user-stats-table td::before { content: attr(data-label); font-weight: bold; display: inline-block; width: 100px; margin-right: 10px; color: var(--text-primary); text-align: left; }
            .user-stats-table tr:last-child { border-bottom: none; }
        }
    </style>
</head>
<body style="">
    <div id="report-content-wrapper">
        <div class="grid-container">
            <div class="card main-card">
                <h1>NotebookLM使用交流群周报</h1>
                <div class="date">2025年5月19日 - 2025年5月25日</div>
                <div class="meta-info">
                    <span><i class="fas fa-comment"></i> 消息数: 约180条</span>
                    <span><i class="fas fa-users"></i> 活跃用户: 15人</span>
                    <span><i class="fas fa-fire"></i> 核心话题: 7个</span>
                </div>
                <p class="summary">本周消息总数约180条，15位用户保持活跃。共分享技术资源8个，推荐工具6个，并解决了4个主要问题。核心讨论围绕Gemini新版本、群聊日报工具、NotebookLM音频生成、Listenhub体验、NotebookLM App、PageTalk工具及万能Prompt生成器等7大话题展开。</p>
                <i class="fas fa-users-cog card-icon"></i>
            </div>

            <div class="topic-cards-wrapper">
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper"> 
                        <h2><i class="fas fa-microchip"></i> Gemini 2.0 Pro 0325版本体验</h2>
                        <div class="topic-category">核心讨论</div>
                        <p>本周群内多位用户分享了<span class="highlight-keyword">Gemini 2.0 Pro 0325版本</span>的使用体验。该版本在处理复杂任务时表现出色，特别是在<span class="highlight-keyword">文档分析</span>和对话生成方面有显著提升。用户反馈显示，新版本的响应速度更快，理解能力更强，但在某些特定场景下仍存在不稳定性。<span class="highlight-keyword">API</span>方面，Google为<span class="highlight-keyword">Flash模型</span>新增了<span class="highlight-keyword">URL context功能</span>，这一更新让开发者能够更便捷地处理网页内容，为相关应用的开发提供了新的可能性。群友们普遍认为这次更新是一个重要的里程碑，为后续的应用开发奠定了良好基础。</p>
                        <div class="topic-keywords">
                            <span class="keyword">Gemini 2.0 Pro</span>
                            <span class="keyword">API</span>
                            <span class="keyword">Flash模型</span>
                            <span class="keyword">URL Context</span>
                        </div>
                    </div>
                    <i class="fas fa-cogs card-icon"></i> 
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper"> 
                        <h2><i class="fas fa-newspaper"></i> 群聊日报生成工具与教程</h2>
                        <div class="topic-category">核心讨论</div>
                        <p>群内持续讨论群聊日报的<span class="highlight-keyword">自动化生成</span>方案，主要涉及三个核心工具：<span class="highlight-keyword">Chatlog</span>、<span class="highlight-keyword">Trae/Cursor/Winsurf</span>编程环境，以及<span class="highlight-keyword">GoFullPage</span>截图工具。用户分享了详细的使用教程和最佳实践，包括如何配置Chatlog工具来提取聊天记录、如何使用AI编程助手生成美观的报告页面，以及如何通过GoFullPage实现完整页面截图。这套工具链已经在多个群聊中得到验证，能够自动生成包含数据统计、话题分析、活跃用户排行等内容的专业级群聊总结。群主还提供了相关的<span class="highlight-keyword">提示词模板</span>和配置指南，帮助其他群友快速上手这一工具链。</p>
                        <div class="topic-keywords">
                            <span class="keyword">Chatlog</span>
                            <span class="keyword">自动化</span>
                            <span class="keyword">GoFullPage</span>
                            <span class="keyword">教程分享</span>
                        </div>
                    </div>
                    <i class="fas fa-tools card-icon"></i> 
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper"> 
                        <h2><i class="fas fa-file-audio"></i> NotebookLM长音频稳定性</h2>
                        <div class="topic-category">核心讨论</div>
                        <p>用户在使用<span class="highlight-keyword">NotebookLM</span>生成<span class="highlight-keyword">长时间音频</span>内容时遇到了<span class="highlight-keyword">稳定性问题</span>，主要表现为生成过程中断、音频质量不一致等情况。经过群友们的讨论和实践，总结出了几个有效的<span class="highlight-keyword">优化策略</span>：首先是合理控制输入文档的长度和复杂度；其次是优化提示词设计；最后是<span class="highlight-keyword">分段处理</span>长内容。这些策略显著提高了音频生成的成功率和质量。</p>
                        <div class="topic-keywords">
                            <span class="keyword">NotebookLM</span>
                            <span class="keyword">长音频</span>
                            <span class="keyword">稳定性</span>
                            <span class="keyword">优化策略</span>
                        </div>
                    </div>
                    <i class="fas fa-headphones card-icon"></i> 
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper"> 
                        <h2><i class="fas fa-podcast"></i> Listenhub AI播客产品体验</h2>
                        <div class="topic-category">核心讨论</div>
                        <p>本周群内多位用户获得了<span class="highlight-keyword">Listenhub AI播客</span>产品的邀请码并进行了深度体验。用户反馈显示，该产品在<span class="highlight-keyword">声音真实度</span>方面表现出色，生成的播客音频接近真人对话效果，但在<span class="highlight-keyword">时长限制</span>和<span class="highlight-keyword">中文优化</span>方面仍有改进空间。产品的整体设计理念和技术实现获得了用户的认可。</p>
                        <div class="topic-keywords">
                            <span class="keyword">Listenhub</span>
                            <span class="keyword">AI播客</span>
                            <span class="keyword">产品体验</span>
                            <span class="keyword">声音真实度</span>
                        </div>
                    </div>
                    <i class="fas fa-microphone-alt card-icon"></i> 
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper"> 
                        <h2><i class="fas fa-mobile-alt"></i> NotebookLM App发布情况</h2>
                        <div class="topic-category">核心讨论</div>
                        <p><span class="highlight-keyword">NotebookLM移动应用</span>的发布成为本周热议话题。<span class="highlight-keyword">安卓版本</span>已经可以下载，但部分用户反映存在下载困难和<span class="highlight-keyword">兼容性问题</span>。苹果版本的发布时间仍不确定。已体验过安卓版的用户反馈，应用在功能上与网页版基本一致，但在移动端的交互体验和性能表现上还需要进一步优化，部分用户遇到了应用闪退的问题。</p>
                        <div class="topic-keywords">
                            <span class="keyword">NotebookLM App</span>
                            <span class="keyword">移动应用</span>
                            <span class="keyword">安卓版</span>
                            <span class="keyword">用户体验</span>
                        </div>
                    </div>
                    <i class="fas fa-tablet-alt card-icon"></i> 
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper"> 
                        <h2><i class="fas fa-window-maximize"></i> PageTalk工具推荐与对比</h2>
                        <div class="topic-category">核心讨论</div>
                        <p>群友<span class="highlight-name">meeer</span>开发的<span class="highlight-keyword">PageTalk工具</span>获得了广泛关注和好评。该工具支持<span class="highlight-keyword">Gemini模型</span>，具有更长的上下文处理能力，并且支持<span class="highlight-keyword">Markdown</span>和<span class="highlight-keyword">Mermaid图表</span>的渲染。与Dia浏览器相比，PageTalk在某些方面具有优势，但Dia浏览器在多窗口叠加和整体用户体验方面仍有其独特优势。PageTalk被认为是无Mac设备用户的良好替代方案。</p>
                        <div class="topic-keywords">
                            <span class="keyword">PageTalk</span>
                            <span class="keyword">Gemini</span>
                            <span class="keyword">Markdown</span>
                            <span class="keyword">Dia浏览器</span>
                        </div>
                    </div>
                    <i class="fas fa-comment-alt card-icon"></i> 
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper"> 
                        <h2><i class="fas fa-magic"></i> 万能Prompt生成器分享</h2>
                        <div class="topic-category">核心讨论</div>
                        <p>群友<span class="highlight-name">晶</span>分享了一个功能强大的<span class="highlight-keyword">万能Prompt生成器</span>，该工具基于最新的<span class="highlight-keyword">提示词工程</span>研究，能够根据用户需求自动生成优化的提示词。工具采用<span class="highlight-keyword">CRAFT方法</span>，结合链式思维、角色扮演、任务分解等先进技术。用户可以将该工具集成到<span class="highlight-keyword">Cherry Studio</span>等AI助手中，提高工作效率和输出质量。</p>
                        <div class="topic-keywords">
                            <span class="keyword">Prompt生成器</span>
                            <span class="keyword">CRAFT方法</span>
                            <span class="keyword">提示词工程</span>
                            <span class="keyword">Cherry Studio</span>
                        </div>
                    </div>
                    <i class="fas fa-lightbulb card-icon"></i> 
                </div>
            </div>
            
            <div class="mindmap-card-container card"> <div class="mindmap-card"> 
                    <h2><i class="fas fa-sitemap"></i> 核心概念关系图</h2>
                    <div class="mindmap-controls">
                        <button id="zoomInBtn"><i class="fas fa-search-plus"></i> 放大</button>
                        <button id="zoomOutBtn"><i class="fas fa-search-minus"></i> 缩小</button>
                        <button id="downloadDiagramBtn"><i class="fas fa-download"></i> 下载导图</button>
                        <button id="fullscreenOpenBtn" class="fullscreen-toggle-btn"><i class="fas fa-expand"></i> 全屏</button> 
                    </div>
                    <div class="mermaid-container" id="mainMermaidContainer"><svg aria-roledescription="mindmap" role="graphics-document document" viewBox="0 0 825.3809814453125 477.46173095703125" style="max-width: 825.381px; transform: scale(1); transform-origin: center center;" xmlns="http://www.w3.org/2000/svg" width="100%" id="initialMainDiagramSvg"><style>#initialMainDiagramSvg{font-family:"Inter",sans-serif;font-size:16px;fill:#333;}#initialMainDiagramSvg .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#initialMainDiagramSvg .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#initialMainDiagramSvg .edge-thickness-normal{stroke-width:2px;}#initialMainDiagramSvg .edge-thickness-thick{stroke-width:3.5px;}#initialMainDiagramSvg .edge-pattern-solid{stroke-dasharray:0;}#initialMainDiagramSvg .edge-pattern-dashed{stroke-dasharray:3;}#initialMainDiagramSvg .edge-pattern-dotted{stroke-dasharray:2;}#initialMainDiagramSvg .marker{fill:#0b0b0b;stroke:#0b0b0b;}#initialMainDiagramSvg .marker.cross{stroke:#0b0b0b;}#initialMainDiagramSvg svg{font-family:"Inter",sans-serif;font-size:16px;}#initialMainDiagramSvg .edge{stroke-width:3;}#initialMainDiagramSvg .section--1 rect,#initialMainDiagramSvg .section--1 path,#initialMainDiagramSvg .section--1 circle,#initialMainDiagramSvg .section--1 polygon,#initialMainDiagramSvg .section--1 path{fill:hsl(40.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section--1 text{fill:#333;}#initialMainDiagramSvg .node-icon--1{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge--1{stroke:hsl(40.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth--1{stroke-width:17;}#initialMainDiagramSvg .section--1 line{stroke:rgb(0, 52.2500000001, 161.5000000002);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-0 rect,#initialMainDiagramSvg .section-0 path,#initialMainDiagramSvg .section-0 circle,#initialMainDiagramSvg .section-0 polygon,#initialMainDiagramSvg .section-0 path{fill:hsl(-79.4117647059, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-0 text{fill:#333;}#initialMainDiagramSvg .node-icon-0{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-0{stroke:hsl(-79.4117647059, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-0{stroke-width:14;}#initialMainDiagramSvg .section-0 line{stroke:rgb(52.2500000001, 161.5000000002, 0);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-1 rect,#initialMainDiagramSvg .section-1 path,#initialMainDiagramSvg .section-1 circle,#initialMainDiagramSvg .section-1 polygon,#initialMainDiagramSvg .section-1 path{fill:hsl(220.5882352941, 100%, 73.3333333333%);}#initialMainDiagramSvg .section-1 text{fill:#333;}#initialMainDiagramSvg .node-icon-1{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-1{stroke:hsl(220.5882352941, 100%, 73.3333333333%);}#initialMainDiagramSvg .edge-depth-1{stroke-width:11;}#initialMainDiagramSvg .section-1 line{stroke:rgb(136.0000000002, 92.0000000001, 0);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-2 rect,#initialMainDiagramSvg .section-2 path,#initialMainDiagramSvg .section-2 circle,#initialMainDiagramSvg .section-2 polygon,#initialMainDiagramSvg .section-2 path{fill:hsl(70.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-2 text{fill:#333;}#initialMainDiagramSvg .node-icon-2{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-2{stroke:hsl(70.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-2{stroke-width:8;}#initialMainDiagramSvg .section-2 line{stroke:rgb(28.5, 0, 161.5000000002);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-3 rect,#initialMainDiagramSvg .section-3 path,#initialMainDiagramSvg .section-3 circle,#initialMainDiagramSvg .section-3 polygon,#initialMainDiagramSvg .section-3 path{fill:hsl(100.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-3 text{fill:#333;}#initialMainDiagramSvg .node-icon-3{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-3{stroke:hsl(100.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-3{stroke-width:5;}#initialMainDiagramSvg .section-3 line{stroke:rgb(109.2500000001, 0, 161.5000000002);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-4 rect,#initialMainDiagramSvg .section-4 path,#initialMainDiagramSvg .section-4 circle,#initialMainDiagramSvg .section-4 polygon,#initialMainDiagramSvg .section-4 path{fill:hsl(130.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-4 text{fill:#333;}#initialMainDiagramSvg .node-icon-4{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-4{stroke:hsl(130.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-4{stroke-width:2;}#initialMainDiagramSvg .section-4 line{stroke:rgb(161.5000000002, 0, 133.0000000002);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-5 rect,#initialMainDiagramSvg .section-5 path,#initialMainDiagramSvg .section-5 circle,#initialMainDiagramSvg .section-5 polygon,#initialMainDiagramSvg .section-5 path{fill:hsl(160.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-5 text{fill:#333;}#initialMainDiagramSvg .node-icon-5{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-5{stroke:hsl(160.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-5{stroke-width:-1;}#initialMainDiagramSvg .section-5 line{stroke:rgb(161.5000000002, 0, 52.2500000001);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-6 rect,#initialMainDiagramSvg .section-6 path,#initialMainDiagramSvg .section-6 circle,#initialMainDiagramSvg .section-6 polygon,#initialMainDiagramSvg .section-6 path{fill:hsl(190.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-6 text{fill:#333;}#initialMainDiagramSvg .node-icon-6{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-6{stroke:hsl(190.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-6{stroke-width:-4;}#initialMainDiagramSvg .section-6 line{stroke:rgb(161.5000000002, 28.5, 0);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-7 rect,#initialMainDiagramSvg .section-7 path,#initialMainDiagramSvg .section-7 circle,#initialMainDiagramSvg .section-7 polygon,#initialMainDiagramSvg .section-7 path{fill:hsl(250.5882352941, 100%, 75%);}#initialMainDiagramSvg .section-7 text{fill:#333;}#initialMainDiagramSvg .node-icon-7{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-7{stroke:hsl(250.5882352941, 100%, 75%);}#initialMainDiagramSvg .edge-depth-7{stroke-width:-7;}#initialMainDiagramSvg .section-7 line{stroke:rgb(105, 127.5, 0);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-8 rect,#initialMainDiagramSvg .section-8 path,#initialMainDiagramSvg .section-8 circle,#initialMainDiagramSvg .section-8 polygon,#initialMainDiagramSvg .section-8 path{fill:hsl(310.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-8 text{fill:#333;}#initialMainDiagramSvg .node-icon-8{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-8{stroke:hsl(310.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-8{stroke-width:-10;}#initialMainDiagramSvg .section-8 line{stroke:rgb(0, 161.5000000002, 28.5);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-9 rect,#initialMainDiagramSvg .section-9 path,#initialMainDiagramSvg .section-9 circle,#initialMainDiagramSvg .section-9 polygon,#initialMainDiagramSvg .section-9 path{fill:hsl(340.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-9 text{fill:#333;}#initialMainDiagramSvg .node-icon-9{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-9{stroke:hsl(340.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-9{stroke-width:-13;}#initialMainDiagramSvg .section-9 line{stroke:rgb(0, 161.5000000002, 109.2500000001);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-10 rect,#initialMainDiagramSvg .section-10 path,#initialMainDiagramSvg .section-10 circle,#initialMainDiagramSvg .section-10 polygon,#initialMainDiagramSvg .section-10 path{fill:hsl(10.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-10 text{fill:#333;}#initialMainDiagramSvg .node-icon-10{font-size:40px;color:#333;}#initialMainDiagramSvg .section-edge-10{stroke:hsl(10.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .edge-depth-10{stroke-width:-16;}#initialMainDiagramSvg .section-10 line{stroke:rgb(0, 133.0000000002, 161.5000000002);stroke-width:3;}#initialMainDiagramSvg .disabled,#initialMainDiagramSvg .disabled circle,#initialMainDiagramSvg .disabled text{fill:lightgray;}#initialMainDiagramSvg .disabled text{fill:#efefef;}#initialMainDiagramSvg .section-root rect,#initialMainDiagramSvg .section-root path,#initialMainDiagramSvg .section-root circle,#initialMainDiagramSvg .section-root polygon{fill:hsl(40.5882352941, 100%, 68.3333333333%);}#initialMainDiagramSvg .section-root text{fill:#333;}#initialMainDiagramSvg .icon-container{height:100%;display:flex;justify-content:center;align-items:center;}#initialMainDiagramSvg .edge{fill:none;}#initialMainDiagramSvg .mindmap-node-label{dy:1em;alignment-baseline:middle;text-anchor:middle;dominant-baseline:middle;text-align:center;}#initialMainDiagramSvg :root{--mermaid-font-family:"Inter",sans-serif;}</style><g></g><g class="mindmap-edges"><path class="edge section-edge-0 edge-depth-1" d="M 566.4478243281128,256.8995847314316 L 651.5832263583804,246.29522433483586 L736.7186283886481,235.69086393824008"></path><path class="edge section-edge-0 edge-depth-1" d="M 563.7126255630225,267.55039590891374 L 613.9724877184067,303.9398558298442 L664.2323498737909,340.32931575077464"></path><path class="edge section-edge-0 edge-depth-0" d="M 353.3196119433238,232.0790043381939 L 445.00821637403385,244.41617176369746 L536.6968208047439,256.75333918920103"></path><path class="edge section-edge-1 edge-depth-1" d="M 402.1317383252022,344.3686153153989 L 368.91730133693477,383.14416930311165 L335.70286434866733,421.9197232908244"></path><path class="edge section-edge-1 edge-depth-1" d="M 421.9372752478114,344.1144159774232 L 456.4009219592781,382.3184605609516 L490.8645686707448,420.52250514448"></path><path class="edge section-edge-1 edge-depth-0" d="M 347.1672716431502,242.28819442154128 L 375.17175395550237,281.52765692709886 L403.17623626785456,320.7671194326565"></path><path class="edge section-edge-2 edge-depth-1" d="M 538.5632548125816,141.7016529329549 L 534.558790679013,100.39083637915385 L530.5543265454444,59.08001982535281"></path><path class="edge section-edge-2 edge-depth-1" d="M 553.6917919782379,150.48170125990274 L 628.4922441748031,116.85764539849251 L703.2926963713683,83.23358953708228"></path><path class="edge section-edge-2 edge-depth-0" d="M 352.5470320712017,224.9430735223866 L 439.23203992082836,193.3551887320707 L525.9170477704549,161.76730394175473"></path><path class="edge section-edge-3 edge-depth-0" d="M 338.14750929917403,215.08182774503024 L 337.33813470207053,175.42448054246339 L336.52876010496703,135.76713333989653"></path><path class="edge section-edge-4 edge-depth-0" d="M 323.4848997227663,231.04746973317285 L 224.84007300499349,237.43170896292403 L126.19524628722073,243.81594819267522"></path><path class="edge section-edge-5 edge-depth-0" d="M 326.69891612022855,239.39684800566272 L 283.67718352851404,273.5009749880903 L240.65545093679955,307.6051019705179"></path><path class="edge section-edge-6 edge-depth-0" d="M 324.487177998879,224.60700322464035 L 242.99460829382429,192.68017609601705 L161.50203858876955,160.75334896739375"></path></g><g class="mindmap-nodes"><g transform="translate(275.45358350998697, 208.42870470583364)" class="mindmap-node section--1 section-root"><g transform="translate(63, 21.65)"><circle r="63" class="node-bkg node-circle" id="node-0"></circle></g><g transform="translate(63, 7.5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">本周核心议题</tspan></tspan></text></g></g></g><g transform="translate(466.00816173808073, 229.60363882156125)" class="mindmap-node section-0"><g><rect width="171.109375" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-1"></rect></g><g transform="translate(85.5546875, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Gemini</tspan><tspan font-weight="normal" class="text-inner-tspan" font-style="normal"> 2.0</tspan><tspan font-weight="normal" class="text-inner-tspan" font-style="normal"> Pro</tspan></tspan></text></g></g></g><g transform="translate(692.8262597286802, 204.68680984811044)" class="mindmap-node section-0"><g><rect width="117.5546875" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-2"></rect></g><g transform="translate(58.77734375, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">API更新</tspan></tspan></text></g></g></g><g transform="translate(598.9758761987326, 319.97607283812715)" class="mindmap-node section-0"><g><rect width="154.8125" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-3"></rect></g><g transform="translate(77.40625, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">URL</tspan><tspan font-weight="normal" class="text-inner-tspan" font-style="normal"> Context</tspan></tspan></text></g></g></g><g transform="translate(333.88992440101777, 303.8266091483641)" class="mindmap-node section-1"><g><rect width="156" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-4"></rect></g><g transform="translate(78, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">群聊日报工具</tspan></tspan></text></g></g></g><g transform="translate(266.6204595228518, 404.1617294578592)" class="mindmap-node section-1"><g><rect width="118.6484375" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-5"></rect></g><g transform="translate(59.32421875, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Chatlog</tspan></tspan></text></g></g></g><g transform="translate(446.9119195175384, 402.51031197353916)" class="mindmap-node section-1"><g><rect width="108" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-6"></rect></g><g transform="translate(54, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">自动化</tspan></tspan></text></g></g></g><g transform="translate(445.35034008166974, 127.4816727583077)" class="mindmap-node section-2"><g><rect width="189.3203125" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-7"></rect></g><g transform="translate(94.66015625, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">NotebookLM音频</tspan></tspan></text></g></g></g><g transform="translate(475.10708502635623, 15)" class="mindmap-node section-2"><g><rect width="108" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-8"></rect></g><g transform="translate(54, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">稳定性</tspan></tspan></text></g></g></g><g transform="translate(654.9739920179364, 47.93361803867732)" class="mindmap-node section-2"><g><rect width="124" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-9"></rect></g><g transform="translate(62, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">优化策略</tspan></tspan></text></g></g></g><g transform="translate(253.2500296441541, 91.62025637909312)" class="mindmap-node section-3"><g><rect width="165.9453125" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-10"></rect></g><g transform="translate(82.97265625, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Listenhub体验</tspan></tspan></text></g></g></g><g transform="translate(15, 215.63471322001442)" class="mindmap-node section-4"><g><rect width="192.453125" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-11"></rect></g><g transform="translate(96.2265625, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">NotebookLM</tspan><tspan font-weight="normal" class="text-inner-tspan" font-style="normal"> App</tspan></tspan></text></g></g></g><g transform="translate(148.9554710470411, 287.77324527034705)" class="mindmap-node section-5"><g><rect width="159.890625" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-12"></rect></g><g transform="translate(79.9453125, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">PageTalk工具</tspan></tspan></text></g></g></g><g transform="translate(66.2270393276616, 126.13164748620045)" class="mindmap-node section-6"><g><rect width="162.6171875" ry="30" rx="30" height="58.3" class="node-bkg node-rounded-rect" id="node-13"></rect></g><g transform="translate(81.30859375, 15)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect class="background"></rect><text y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Prompt生成器</tspan></tspan></text></g></g></g></g></svg></div>
                    <div id="mermaid-main-feedback-message"></div>
                    <i class="fas fa-project-diagram card-icon"></i>
                </div>
            </div>

            <div class="card utility-card">
                <h2><i class="fas fa-cogs"></i> 实用工具与技巧推荐</h2>
                <h3>核心工具</h3>
                <ul>
                    <li><strong>PageTalk:</strong> Gemini驱动的网页AI对话工具</li>
                    <li><strong>万能Prompt生成器:</strong> 基于CRAFT方法的提示词优化工具</li>
                    <li><strong>Chatlog:</strong> 群聊记录提取和分析工具</li>
                    <li><strong>Cherry Studio:</strong> AI助手集成平台</li>
                    <li><strong>GoFullPage:</strong> 完整页面截图工具</li>
                </ul>
                <h3>使用技巧</h3>
                <ul>
                    <li><strong>NotebookLM长音频生成:</strong> 分段处理，优化提示词结构</li>
                    <li><strong>PageTalk使用:</strong> 在正常网页而非插件管理页面启动</li>
                    <li><strong>Gemini API:</strong> 利用新增的URL context功能处理网页内容</li>
                    <li><strong>群聊日报:</strong> 结合多工具链实现自动化生成</li>
                </ul>
                <i class="fas fa-puzzle-piece card-icon"></i>
            </div>

            <div class="card solutions-card">
                <h2><i class="fas fa-wrench"></i> 技术问题解决方案记录</h2>
                <div>
                    <h4>PageTalk使用问题</h4>
                    <p><strong>问题：</strong>插件在管理页面无法正常工作</p>
                    <p><strong>解决方案：</strong>需要在正常的HTTP网页中启动插件</p>
                </div>
                <div>
                    <h4>NotebookLM音频生成不稳定</h4>
                    <p><strong>问题：</strong>长音频生成过程中断或质量不一致</p>
                    <p><strong>解决方案：</strong>控制文档长度，优化提示词，采用分段处理策略</p>
                </div>
                <div>
                    <h4>Gemini地区限制问题</h4>
                    <p><strong>问题：</strong>某些功能仅限美国地区使用</p>
                    <p><strong>解决方案：</strong>使用美区VPN，设置美区账号，调整页面语言为英文</p>
                </div>
                <div>
                    <h4>移动端应用闪退</h4>
                    <p><strong>问题：</strong>NotebookLM安卓版在处理复杂任务时闪退</p>
                    <p><strong>解决方案：</strong>等待官方更新，暂时使用网页版处理复杂任务</p>
                </div>
                <i class="fas fa-life-ring card-icon"></i>
            </div>

            <div class="card trends-card">
                <h2><i class="fas fa-chart-bar"></i> 趋势观察</h2>
                <ul>
                    <li>AI工具移动化趋势明显：NotebookLM推出移动应用，用户对移动端AI工具需求增长</li>
                    <li>开源替代方案受欢迎：PageTalk等开源工具获得广泛关注</li>
                    <li>工具链整合需求增强：用户更倾向于使用集成多种功能的工具平台</li>
                    <li>提示词工程重要性凸显：专业的提示词生成工具需求增长</li>
                    <li>音频内容生成成为热点：播客、语音对话等音频AI应用快速发展</li>
                </ul>
                <i class="fas fa-binoculars card-icon"></i>
            </div>


            <div class="card quote-card">
                <h2><i class="fas fa-quote-left"></i> 本周金句</h2>
                <div class="quote">
                    "Gemini 2.0 Pro 0325版本在处理复杂任务时表现出色，特别是在文档分析和对话生成方面有显著提升。"
                    <div class="quote-author">- 向阳乔木 (vista8) (群主)</div>
                </div>
                <div class="quote">
                    "PageTalk工具支持Gemini模型，具有更长的上下文处理能力，并且支持Markdown和Mermaid图表的渲染，在可视化方面表现出色。"
                    <div class="quote-author">- meer</div>
                </div>
                 <div class="quote">
                    "万能Prompt生成器采用CRAFT方法，结合链式思维、角色扮演、任务分解等先进技术，生成的提示词质量很高。"
                    <div class="quote-author">- 晶 (hercy_yj)</div>
                </div>
                <i class="fas fa-comment-dots card-icon"></i> 
            </div>

            <div class="card links-card">
                <h2><i class="fas fa-link"></i> 重要资源链接汇总</h2>
                <div class="link-item">
                    <a href="https://github.com/jeanchristophe13v/PageTalk" target="_blank">
                        <i class="fab fa-github link-icon"></i> 
                        <span class="link-title">PageTalk项目地址</span>
                    </a>
                </div>
                <div class="link-item">
                    <a href="https://x.com/zen_sajnani/status/1908857771514003539" target="_blank">
                        <i class="fab fa-twitter link-icon"></i>
                        <span class="link-title">万能Prompt生成器</span>
                    </a>
                </div>
                <div class="link-item">
                    <a href="http://s.mrw.so/dbr8m" target="_blank">
                        <i class="fas fa-external-link-alt link-icon"></i>
                        <span class="link-title">群聊总结工具</span>
                    </a>
                </div>
                <div class="link-item">
                    <a href="http://s.mrw.so/7at4B" target="_blank">
                        <i class="fas fa-cloud link-icon"></i>
                        <span class="link-title">群聊云图与话痨王者</span>
                    </a>
                </div>
                <div class="link-item">
                    <a href="http://s.mrw.so/bGD4S" target="_blank">
                        <i class="fas fa-book link-icon"></i>
                        <span class="link-title">教程与提示词资源</span>
                    </a>
                </div>
                <div class="link-item"> <i class="fas fa-mobile-alt link-icon"></i> 
                    <span class="link-title">NotebookLM官方应用 - 安卓版已发布，iOS版待发布</span> 
                </div>
                 <div class="link-item"> <i class="fas fa-headset link-icon"></i> 
                    <span class="link-title">Listenhub AI播客 - 需邀请码，体验版功能有限</span> 
                </div>
                <i class="fas fa-share-alt card-icon"></i> 
            </div>

            <div class="card stats-card">
                <h2><i class="fas fa-star"></i> 活跃用户排行榜</h2>
                <table class="user-stats-table">
                    <thead>
                        <tr>
                            <th class="user-name-col">用户</th>
                            <th class="message-count-col">发言数</th>
                            <th class="contribution-col">主要贡献</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-label="用户" class="user-name-col">晶 (hercy_yj)</td>
                            <td data-label="发言数" class="message-count-col">25</td>
                            <td data-label="主要贡献" class="contribution-col">分享工具和教程</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">meeer</td>
                            <td data-label="发言数" class="message-count-col">22</td>
                            <td data-label="主要贡献" class="contribution-col">PageTalk开发者</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">向阳乔木 (vista8) (群主)</td>
                            <td data-label="发言数" class="message-count-col">18</td>
                            <td data-label="主要贡献" class="contribution-col">技术讨论活跃, 群主</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">我</td>
                            <td data-label="发言数" class="message-count-col">15</td>
                            <td data-label="主要贡献" class="contribution-col">群聊总结分享</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">w</td>
                            <td data-label="发言数" class="message-count-col">12</td>
                            <td data-label="主要贡献" class="contribution-col">技术问题咨询</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">🌏🔭 (freshny117)</td>
                            <td data-label="发言数" class="message-count-col">10</td>
                            <td data-label="主要贡献" class="contribution-col">产品体验分享</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">Ronin_Chang</td>
                            <td data-label="发言数" class="message-count-col">8</td>
                            <td data-label="主要贡献" class="contribution-col">技术解答</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">禾上 (bedromance)</td>
                            <td data-label="发言数" class="message-count-col">6</td>
                            <td data-label="主要贡献" class="contribution-col">学习交流</td>
                        </tr>
                         <tr>
                            <td data-label="用户" class="user-name-col">🌟Ting🌟</td>
                            <td data-label="发言数" class="message-count-col">5</td>
                            <td data-label="主要贡献" class="contribution-col">问题咨询</td>
                        </tr>
                         <tr>
                            <td data-label="用户" class="user-name-col">龙菲</td>
                            <td data-label="发言数" class="message-count-col">4</td>
                            <td data-label="主要贡献" class="contribution-col">商业化讨论</td>
                        </tr>
                    </tbody>
                </table>
                <i class="fas fa-user-friends card-icon"></i> 
            </div>

            <div class="card wordcloud-card">
                <h2><i class="fas fa-cloud"></i> 本周热词</h2>
                <div class="wordcloud">
                    <span class="wordcloud-item size-5">Gemini</span>
                    <span class="wordcloud-item size-5">NotebookLM</span>
                    <span class="wordcloud-item size-4">AI工具</span>
                    <span class="wordcloud-item size-4">API</span>
                    <span class="wordcloud-item size-3">Prompt</span>
                    <span class="wordcloud-item size-3">PageTalk</span>
                    <span class="wordcloud-item size-3">音频</span>
                    <span class="wordcloud-item size-2">用户体验</span>
                    <span class="wordcloud-item size-2">分享</span>
                    <span class="wordcloud-item size-1">问题解决</span>
                    <span class="wordcloud-item size-4">教程</span>
                    <span class="wordcloud-item size-3">移动应用</span>
                </div>
                <i class="fas fa-tags card-icon"></i> 
            </div>
        </div> 
        
        <div class="footer">
            <p>数据来源：NotebookLM使用交流群聊记录 | 生成日期：2025年5月25日 | 统计周期：2025年5月19日 - 2025年5月25日</p>
            <p>本周报由群聊日报工具自动生成，如有疑问请联系群主。</p>
        </div>
    </div> 

    <div class="action-buttons-container" style="display: block; flex-wrap: nowrap;">
        <button id="viewPreviousReportBtn" class="action-button"><i class="fas fa-calendar-alt"></i> 查看上周周报</button>
        <button id="screenshotToClipboardBtn" class="action-button"><i class="fas fa-clipboard"></i> 拷贝截图</button>
        <button id="screenshotDownloadBtn" class="action-button"><i class="fas fa-camera"></i> 下载截图</button>
        <button id="copyHtmlBtn" class="action-button"><i class="fas fa-copy"></i> 拷贝源码</button>
        <button id="downloadHtmlBtn" class="action-button"><i class="fas fa-download"></i> 下载报告</button>
    </div>
    <div id="feedback-message" class=""></div> <div id="fullscreenModal" class="modal-overlay">
        <div class="modal-content card"> <button id="fullscreenCloseBtn" class="modal-close-btn" aria-label="关闭全屏">×</button>
            <h2><i class="fas fa-sitemap"></i> 核心概念关系图 (全屏)</h2>
            <div class="mindmap-controls">
                <button id="modalZoomInBtn"><i class="fas fa-search-plus"></i> 放大</button>
                <button id="modalZoomOutBtn"><i class="fas fa-search-minus"></i> 缩小</button>
                <button id="modalDownloadDiagramBtn"><i class="fas fa-download"></i> 下载导图</button>
            </div>
            <div class="mermaid-container" id="modalMermaidContainer">
            </div>
            <div id="mermaid-modal-feedback-message"></div>
        </div>
    </div>
    <script>
    // --- Mermaid Diagram JavaScript START ---
    // --- Global Variables for Mermaid ---
    let mainCurrentScale = 1;
    let modalCurrentScale = 1;
    let currentMindmapDefinition = ''; // Store the current definition

    // --- DOM Elements for Mermaid ---
    const mainZoomInBtn = document.getElementById('zoomInBtn');
    const mainZoomOutBtn = document.getElementById('zoomOutBtn');
    const mainDownloadDiagramBtn = document.getElementById('downloadDiagramBtn'); // Renamed from downloadBtn
    const mainMermaidContainer = document.getElementById('mainMermaidContainer');
    const mermaidMainFeedbackMessage = document.getElementById('mermaid-main-feedback-message'); // Renamed
    const mainMindmapDiagramDiv = document.getElementById('mindmapDiagram'); 

    const fullscreenOpenBtn = document.getElementById('fullscreenOpenBtn');
    const fullscreenModal = document.getElementById('fullscreenModal');
    const fullscreenCloseBtn = document.getElementById('fullscreenCloseBtn');
    const modalMermaidContainer = document.getElementById('modalMermaidContainer');
    const modalZoomInBtn = document.getElementById('modalZoomInBtn');
    const modalZoomOutBtn = document.getElementById('modalZoomOutBtn');
    const modalDownloadDiagramBtn = document.getElementById('modalDownloadDiagramBtn'); // Renamed
    const mermaidModalFeedbackMessage = document.getElementById('mermaid-modal-feedback-message'); // Renamed

    // --- Mermaid Initialization ---
    if (typeof mermaid !== 'undefined') {
        mermaid.initialize({
            startOnLoad: false, // Will render manually after content is set
            theme: 'base', // Options: 'default', 'forest', 'dark', 'neutral', 'base'
            fontFamily: '"Inter", sans-serif',
            mindmap: { padding: 15 }
            // For other diagram types, you might add specific configs here
            // e.g., sequence: { actorMargin: 50 }
        });
    } else {
        console.error("Mermaid library not loaded.");
        if(mermaidMainFeedbackMessage) mermaidMainFeedbackMessage.textContent = "错误：Mermaid库未能加载。";
    }
    

    // --- Helper Functions for Mermaid ---
    function showMermaidFeedback(element, message, type = 'info', duration = 3000) {
        if (element) {
            element.textContent = message;
            element.className = type; // success, error, info
            element.style.display = 'block';
            setTimeout(() => {
                element.textContent = '';
                element.className = '';
                element.style.display = 'none';
            }, duration);
        }
    }

    function applySvgScale(svgElement, scale) {
        if (svgElement) {
            svgElement.style.transform = `scale(${scale})`;
            svgElement.style.transformOrigin = 'center center'; // Ensure scaling is from center
        }
    }

    function makeDraggable(containerElement) {
        let isDragging = false;
        let startX, startY, scrollLeftStart, scrollTopStart;

        if (!containerElement) return;

        containerElement.addEventListener('mousedown', (e) => {
            if (e.button !== 0) return; // Only main mouse button
            // Prevent dragging if clicking on interactive elements within the SVG or buttons
            if (e.target.closest('button') || e.target.closest('a') || e.target.closest('[onclick]')) return;
            
            // Check if clicking on scrollbars (simple check, might need refinement)
                if (e.target === containerElement) { // Only drag if mousedown is on container itself, not SVG content
                    const verticalScrollbarVisible = containerElement.scrollHeight > containerElement.clientHeight;
                    const horizontalScrollbarVisible = containerElement.scrollWidth > containerElement.clientWidth;
                    const clickedOnVerticalScrollbar = verticalScrollbarVisible && e.offsetX >= containerElement.clientWidth - 17; // Approx scrollbar width
                    const clickedOnHorizontalScrollbar = horizontalScrollbarVisible && e.offsetY >= containerElement.clientHeight - 17;
                    if (clickedOnVerticalScrollbar || clickedOnHorizontalScrollbar) return;
            }


            isDragging = true;
            startX = e.pageX; startY = e.pageY;
            scrollLeftStart = containerElement.scrollLeft; scrollTopStart = containerElement.scrollTop;
            containerElement.classList.add('dragging');
            // e.preventDefault(); // Be careful with preventDefault on container, might affect text selection inside SVG if not handled well
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault(); // Prevent text selection during drag
            const deltaX = e.pageX - startX; const deltaY = e.pageY - startY;
            containerElement.scrollLeft = scrollLeftStart - deltaX;
            containerElement.scrollTop = scrollTopStart - deltaY;
        });

        document.addEventListener('mouseup', (e) => {
            if (e.button !== 0 || !isDragging) return;
            isDragging = false;
            containerElement.classList.remove('dragging');
        });
        // Touch events for dragging on mobile
        containerElement.addEventListener('touchstart', (e) => {
            if (e.target.closest('button') || e.target.closest('a') || e.target.closest('[onclick]')) return;
            if (e.touches.length === 1) {
                isDragging = true;
                const touch = e.touches[0];
                startX = touch.pageX;
                startY = touch.pageY;
                scrollLeftStart = containerElement.scrollLeft;
                scrollTopStart = containerElement.scrollTop;
                containerElement.classList.add('dragging');
            }
        }, { passive: true }); // Use passive true if not calling preventDefault

        document.addEventListener('touchmove', (e) => {
            if (!isDragging || e.touches.length !== 1) return;
            // e.preventDefault(); // To prevent page scroll if dragging content
            const touch = e.touches[0];
            const deltaX = touch.pageX - startX;
            const deltaY = touch.pageY - startY;
            containerElement.scrollLeft = scrollLeftStart - deltaX;
            containerElement.scrollTop = scrollTopStart - deltaY;
        }/*, { passive: false }*/); // Set passive: false if e.preventDefault() is used

        document.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            isDragging = false;
            containerElement.classList.remove('dragging');
        });
    }
    
    async function downloadMermaidAsSVG(svgElement, baseFilename, feedbackElem) {
        if (svgElement && svgElement.innerHTML.trim() !== "") {
            try {
                // Apply current scale to the SVG for download if desired, or download at 100%
                // For simplicity, we download the SVG as it is currently rendered (potentially scaled in view, but SVG itself is 100%)
                const svgData = new XMLSerializer().serializeToString(svgElement);
                const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${baseFilename}.svg`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                showMermaidFeedback(feedbackElem, `${baseFilename}.svg 已下载!`, 'success');
            } catch (error) {
                console.error(`Error during SVG download for ${baseFilename}:`, error);
                showMermaidFeedback(feedbackElem, `下载 ${baseFilename}.svg 失败: ${error.message}`, 'error');
            }
        } else {
            showMermaidFeedback(feedbackElem, '无法下载：图表内容为空。', 'error');
        }
    }

    async function renderDiagram(definition, targetContainer, scaleVariableRef, feedbackElem, uniqueSvgId) {
        if (!targetContainer) {
            console.error("Target container for Mermaid diagram not found.");
            return null;
        }
        targetContainer.innerHTML = '<p style="text-align:center; padding:20px;">图表加载中...</p>';
        targetContainer.classList.remove('empty');

        if (!definition || definition.trim() === "" || definition.trim().toLowerCase() === "mindmap") {
            targetContainer.innerHTML = ''; 
            targetContainer.classList.add('empty'); 
            return null;
        }
        
        currentMindmapDefinition = definition; // Store the definition for fullscreen toggle

        try {
            if (typeof mermaid === 'undefined') throw new Error("Mermaid library is not available.");
            const {svg, bindFunctions} = await mermaid.render(uniqueSvgId, definition);
            targetContainer.innerHTML = svg;
            if (bindFunctions) bindFunctions(targetContainer);

            const svgElement = targetContainer.querySelector('svg');
            if (svgElement) {
                // Reset scale to 1 initially for the new render
                if (targetContainer === mainMermaidContainer) mainCurrentScale = 1;
                else if (targetContainer === modalMermaidContainer) modalCurrentScale = 1;
                
                applySvgScale(svgElement, scaleVariableRef.value); // Apply current scale (which should be 1 after reset)
                makeDraggable(targetContainer); // Make the container draggable
                return svgElement;
            } else {
                targetContainer.innerHTML = '';
                targetContainer.classList.add('empty');
                showMermaidFeedback(feedbackElem, '图表生成了，但未找到SVG内容。', 'error');
                return null;
            }
        } catch (error) {
            console.error("Error rendering Mermaid:", error);
            targetContainer.innerHTML = `<p style="color:red; text-align:center; padding:20px;">渲染图表时出错: ${error.message}</p>`;
            showMermaidFeedback(feedbackElem, `渲染图表时出错: ${error.message}`, 'error', 5000);
            return null;
        }
    }

    // --- Main Mindmap Logic ---
    if(mainZoomInBtn) mainZoomInBtn.addEventListener('click', () => {
        mainCurrentScale += 0.1;
        const svg = mainMermaidContainer.querySelector('svg');
        applySvgScale(svg, mainCurrentScale);
    });

    if(mainZoomOutBtn) mainZoomOutBtn.addEventListener('click', () => {
        if (mainCurrentScale > 0.2) { // Prevent scaling too small
            mainCurrentScale -= 0.1;
            const svg = mainMermaidContainer.querySelector('svg');
            applySvgScale(svg, mainCurrentScale);
        }
    });

    if(mainDownloadDiagramBtn) mainDownloadDiagramBtn.addEventListener('click', () => {
        const svg = mainMermaidContainer.querySelector('svg');
        downloadMermaidAsSVG(svg, '核心概念关系图', mermaidMainFeedbackMessage);
    });

    // --- Fullscreen Modal Logic for Mermaid ---
    if(fullscreenOpenBtn) fullscreenOpenBtn.addEventListener('click', async () => {
        if (!currentMindmapDefinition || currentMindmapDefinition.trim() === "" || currentMindmapDefinition.trim().toLowerCase() === "mindmap") {
                showMermaidFeedback(mermaidMainFeedbackMessage, '请先生成一个有效的导图才能全屏查看。', 'info');
                return;
        }
        if(fullscreenModal) fullscreenModal.classList.add('active');
        document.body.classList.add('modal-active');
        modalCurrentScale = mainCurrentScale; // Sync scale from main view or reset
        await renderDiagram(currentMindmapDefinition, modalMermaidContainer, {value: modalCurrentScale}, mermaidModalFeedbackMessage, 'modalGeneratedSvgId');
    });

    if(fullscreenCloseBtn) fullscreenCloseBtn.addEventListener('click', () => {
        if(fullscreenModal) fullscreenModal.classList.remove('active');
        document.body.classList.remove('modal-active');
        if(modalMermaidContainer) {
            modalMermaidContainer.innerHTML = ''; 
            modalMermaidContainer.classList.add('empty');
        }
    });

    if(modalZoomInBtn) modalZoomInBtn.addEventListener('click', () => {
        modalCurrentScale += 0.1;
        const svg = modalMermaidContainer.querySelector('svg');
        applySvgScale(svg, modalCurrentScale);
    });

    if(modalZoomOutBtn) modalZoomOutBtn.addEventListener('click', () => {
        if (modalCurrentScale > 0.2) {
            modalCurrentScale -= 0.1;
            const svg = modalMermaidContainer.querySelector('svg');
            applySvgScale(svg, modalCurrentScale);
        }
    });

    if(modalDownloadDiagramBtn) modalDownloadDiagramBtn.addEventListener('click', () => {
        const svg = modalMermaidContainer.querySelector('svg');
        downloadMermaidAsSVG(svg, '核心概念关系图-全屏', mermaidModalFeedbackMessage);
    });

    // --- Initial Setup for Mermaid ---
    async function initializeMainDiagram() {
        if (mainMindmapDiagramDiv && mainMermaidContainer) {
            const initialDefinition = mainMindmapDiagramDiv.textContent.trim();
            if (initialDefinition) {
                await renderDiagram(initialDefinition, mainMermaidContainer, { value: mainCurrentScale }, mermaidMainFeedbackMessage, 'initialMainDiagramSvg');
            } else {
                mainMermaidContainer.classList.add('empty'); // Ensure it's marked empty if no initial content
            }
        } else {
                if(mermaidMainFeedbackMessage && !mainMermaidContainer) showMermaidFeedback(mermaidMainFeedbackMessage, '错误：导图容器未找到。', 'error');
        }
    }
    // --- Mermaid Diagram JavaScript END ---


    // --- Report Page JavaScript START ---
    // Helper function: Get CSS variable value
    function getCssVariable(variableName, defaultValue = null) {
        const value = getComputedStyle(document.documentElement).getPropertyValue(variableName).trim();
        return value || defaultValue;
    }

    function getWebpageNameForFilename() {
        const pageTitleTag = document.querySelector('title');
        let baseName = 'AI产品周报'; // Default to "周报"
        if (pageTitleTag && pageTitleTag.textContent) {
            const fullTitle = pageTitleTag.textContent.trim();
            const titleParts = fullTitle.split(' - '); 
            if (titleParts.length > 0 && titleParts[0].trim() !== "" && !titleParts[0].trim().startsWith("[")) { // Avoid placeholder
                baseName = titleParts[0].trim(); 
            }
        }
        return baseName;
    }

    function getDateStringForFilename() {
        const reportDateElement = document.querySelector('.main-card .date');
        let dateStr = "未指定日期"; 
        if (reportDateElement && reportDateElement.textContent) {
            const dateContent = reportDateElement.textContent.trim();
            if (dateContent && !dateContent.startsWith("[")) { // Avoid placeholder
                dateStr = dateContent;
            }
        }
        return dateStr;
    }
    
    function sanitizeFilename(filename) {
        return filename.replace(/[^a-z0-9\u4e00-\u9fa5_\-\.\(\)\[\]]/gi, '_').replace(/_+/g, '_');
    }

    const previousReportUrl = "在此处填写上周周报的URL"; // Updated placeholder text

    function showReportFeedbackMessage(message, type = 'info', duration = 3000) { // Renamed to avoid conflict
        const feedbackElement = document.getElementById('feedback-message'); // This is the report's general feedback
        if (feedbackElement) {
            feedbackElement.textContent = message;
            feedbackElement.className = type; 
            setTimeout(() => {
                feedbackElement.textContent = '';
                feedbackElement.className = '';
            }, duration);
        }
    }
    
    async function captureScreenshot(elementToCapture) {
        await document.fonts.ready; 
        return html2canvas(elementToCapture, { 
            useCORS: true, 
            scale: window.devicePixelRatio || 1, 
            logging: false, 
            backgroundColor: getCssVariable('--bg-primary', '#f5f4ee'), 
            scrollX: -window.scrollX, 
            scrollY: -window.scrollY,
            windowWidth: document.documentElement.scrollWidth,
            windowHeight: document.documentElement.scrollHeight,
            onclone: function(clonedDoc) {
                const highlightElements = clonedDoc.querySelectorAll('.highlight-keyword');
                highlightElements.forEach(el => {
                    el.style.display = 'inline';
                    el.style.padding = '1px 2px';
                    el.style.lineHeight = '1.2';
                    el.style.boxDecorationBreak = 'clone';
                    el.style.webkitBoxDecorationBreak = 'clone';
                });
            }
        });
    }

    const screenshotToClipboardBtn = document.getElementById('screenshotToClipboardBtn');
    if(screenshotToClipboardBtn) screenshotToClipboardBtn.addEventListener('click', async function() {
        const reportContent = document.getElementById('report-content-wrapper');
        if (!reportContent) {
            showReportFeedbackMessage('截图错误: 未找到报告内容。', 'error');
            return;
        }
        const actionButtons = document.querySelector('.action-buttons-container');
        const feedbackMsgElement = document.getElementById('feedback-message');
        const originalButtonText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 处理中...';
        this.disabled = true;
        if(actionButtons) actionButtons.style.visibility = 'hidden'; 
        if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'hidden';

        try {
            const canvas = await captureScreenshot(reportContent);
            canvas.toBlob(async function(blob) {
                if (blob) {
                    try {
                        if (navigator.clipboard && navigator.clipboard.write) {
                            await navigator.clipboard.write([
                                new ClipboardItem({ 'image/png': blob })
                            ]);
                            showReportFeedbackMessage('截图已拷贝到剪贴板!', 'success');
                        } else {
                            showReportFeedbackMessage('截图已生成，但您的浏览器不支持直接拷贝图片。请尝试下载截图。', 'error', 5000);
                        }
                    } catch (copyError) {
                        console.error('拷贝到剪贴板失败:', copyError);
                        showReportFeedbackMessage('拷贝截图到剪贴板失败: ' + copyError.message, 'error', 5000);
                    }
                } else {
                    throw new Error('无法将Canvas转换为Blob。');
                }
            }, 'image/png');
        } catch (error) {
            console.error('截图捕获失败:', error);
            showReportFeedbackMessage('截图捕获失败: ' + error.message, 'error');
        } finally {
            if(actionButtons) actionButtons.style.visibility = 'visible'; 
            if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'visible'; 
            this.innerHTML = originalButtonText;
            this.disabled = false;
        }
    });

    const screenshotDownloadBtn = document.getElementById('screenshotDownloadBtn');
    if(screenshotDownloadBtn) screenshotDownloadBtn.addEventListener('click', async function() {
        const reportContent = document.getElementById('report-content-wrapper');
        if (!reportContent) {
            showReportFeedbackMessage('截图错误: 未找到报告内容。', 'error');
            return;
        }
        const actionButtons = document.querySelector('.action-buttons-container');
        const feedbackMsgElement = document.getElementById('feedback-message');
        const originalButtonText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 生成中...';
        this.disabled = true;
        if(actionButtons) actionButtons.style.visibility = 'hidden';
        if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'hidden';

        try {
            const canvas = await captureScreenshot(reportContent);
            const image = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            
            const webpageName = getWebpageNameForFilename();
            const dateString = getDateStringForFilename();
            let filename = sanitizeFilename(webpageName + '-' + dateString) + '.png';

            link.href = image;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showReportFeedbackMessage('截图已下载!', 'success');
        } catch (error) {
            console.error('下载截图失败:', error);
            showReportFeedbackMessage('下载截图失败: ' + error.message, 'error');
        } finally {
            if(actionButtons) actionButtons.style.visibility = 'visible';
            if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'visible';
            this.innerHTML = originalButtonText;
            this.disabled = false;
        }
    });
    
    const downloadHtmlBtn = document.getElementById('downloadHtmlBtn');
    if(downloadHtmlBtn) downloadHtmlBtn.addEventListener('click', function() {
        try {
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
            const link = document.createElement('a');
            
            const webpageName = getWebpageNameForFilename();
            const dateString = getDateStringForFilename();
            let filename = sanitizeFilename(webpageName + '-' + dateString) + '.html';
            
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href); 
            showReportFeedbackMessage('HTML报告已下载!', 'success');
        } catch (error) {
            console.error('下载HTML失败:', error);
            showReportFeedbackMessage('下载HTML失败: ' + error.message, 'error');
        }
    });

    const copyHtmlBtn = document.getElementById('copyHtmlBtn');
    if(copyHtmlBtn) copyHtmlBtn.addEventListener('click', function() {
        const htmlContent = document.documentElement.outerHTML;
        const Gthis = this; 
        const originalButtonHTML = Gthis.innerHTML; 
        const textarea = document.createElement('textarea');
        textarea.value = htmlContent;
        textarea.style.position = 'fixed'; 
        textarea.style.top = '-9999px'; 
        textarea.style.left = '-9999px';
        document.body.appendChild(textarea);
        try {
            textarea.select();
            textarea.setSelectionRange(0, textarea.value.length); 
            if (document.execCommand('copy')) {
                Gthis.innerHTML = '<i class="fas fa-check"></i> 已拷贝!';
                showReportFeedbackMessage('HTML已拷贝到剪贴板!', 'success', 2000);
            } else {
                Gthis.innerHTML = '<i class="fas fa-times"></i> 拷贝失败';
                showReportFeedbackMessage('拷贝失败。您的浏览器可能不支持此操作。', 'error', 2000);
            }
        } catch (err) {
            Gthis.innerHTML = '<i class="fas fa-times"></i> 拷贝出错';
            showReportFeedbackMessage('拷贝出错: ' + err.message, 'error', 2000);
            console.error('拷贝HTML源码出错:', err);
        } finally {
            setTimeout(function() { 
                Gthis.innerHTML = originalButtonHTML; 
            }, 2000);
            document.body.removeChild(textarea);
        }
    });

    const viewPreviousReportBtn = document.getElementById('viewPreviousReportBtn');
    if(viewPreviousReportBtn) viewPreviousReportBtn.addEventListener('click', function() {
        const urlToOpen = previousReportUrl.trim();
        const placeholderUrlText = "在此处填写上周周报的URL"; // Updated placeholder
        if (urlToOpen && urlToOpen !== placeholderUrlText && (urlToOpen.startsWith('http://') || urlToOpen.startsWith('https://') || !urlToOpen.includes('://'))) {
            let finalUrl = urlToOpen;
            // Basic check if it's a relative path, might need more robust logic depending on deployment
            // if (!urlToOpen.startsWith('http://') && !urlToOpen.startsWith('https://')) {
            // finalUrl = window.location.origin + (urlToOpen.startsWith('/') ? '' : '/') + urlToOpen;
            // }
            const newWindow = window.open(finalUrl, '_blank'); 
            if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
                showReportFeedbackMessage('无法打开新窗口。请检查您的弹出窗口拦截设置。', 'error', 5000);
            }
        } else {
            showReportFeedbackMessage('上周周报的URL未配置或无效。请检查脚本中的 previousReportUrl 变量，并确保它是一个有效的网址或相对路径。', 'error', 5000);
        }
    });

    function adjustActionButtonsLayout() {
        const actionButtonsContainer = document.querySelector('.action-buttons-container');
        if (actionButtonsContainer) {
            if (window.innerWidth <= 768) { 
                actionButtonsContainer.style.display = 'flex';
                actionButtonsContainer.style.flexWrap = 'wrap';
                actionButtonsContainer.style.justifyContent = 'center';
            } else { 
                actionButtonsContainer.style.display = 'block'; 
                actionButtonsContainer.style.flexWrap = 'nowrap'; 
            }
        }
    }
    
    // --- Event Listeners Call on Load ---
    window.addEventListener('load', () => {
        initializeMainDiagram(); // Initialize Mermaid diagram
        adjustActionButtonsLayout(); // Adjust report buttons layout
    });
    window.addEventListener('resize', adjustActionButtonsLayout); // Adjust on resize as well

    // --- Report Page JavaScript END ---
</script>

</body></html>